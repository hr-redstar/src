# パネルUI設計ルール

## 1. パネルの定義
本Botにおける「パネル」とは、以下を指す。
- パネル設置パネル
- 管理者パネル
- 送迎者パネル
- 利用者パネル
- 送迎一覧パネル

これらはすべて **Botの操作・状態確認を行うためのダッシュボードUI** である。

## 2. 表示ルール（最重要）
- パネル形式の Embed メッセージは **Ephemeral（本人にのみ表示）では送信しない。**
- パネルは必ず **テキストチャンネルに通常メッセージとして送信** する。
- 複数人が同時に確認・操作できることを前提とする。

### 理由
- 管理状態の共有
- 設定の可視化
- 再起動後の復旧性
- 運用引き継ぎの容易さ

## 3. Ephemeral メッセージの使用範囲
Ephemeral メッセージは、以下の用途に限定して使用する。
- 操作完了通知
- エラー・警告表示
- RoleSelect / ChannelSelect などの一時的UI
- 個人確認・入力フェーズ

**パネル本体には使用しない。**

## 4. パネルは「最新1枚」を維持する
- 同種のパネルは常に **1枚のみ存在させる。**
- 再表示時は **新規送信ではなく、既存メッセージを編集（edit）** する。
- パネルの `messageId` は GCS（`config.json`）に保存する。

### 保存例
```json
{
  "panelMessages": {
    "panelSetup": "MESSAGE_ID",
    "adminPanel": "MESSAGE_ID",
    "rideListPanel": "MESSAGE_ID"
  }
}
```

## 5. 実装上のルール
- `panel` を含む Embed 名・関数名は ephemeral 禁止。
- パネル表示は `channel.send()` または `message.edit()` を使用する。
- 操作完了後は、必ず対象パネルを再描画する。

## 6. UIフロー（共通）
1. **公開パネル（Embed）**
   ↓ ボタン操作
2. **Ephemeral UI（Select / 確認）**
   ↓ 決定
3. **設定・状態更新**
   ↓
4. **ログ出力（公開）**
   ↓
5. **パネル再描画（公開）**
   ↓
6. **完了通知（Ephemeral）**

---

### 備考
- ファイル名・ディレクトリ名は日本語を優先する。
- Discord `customId` / interaction 識別子は英語で統一する。
