# 送迎者パネル仕様書 (Professional Edition)

## 1. パネル概要
**送迎者パネル** は、ドライバーが出勤・退勤・休憩などの業務管理を行い、稼働状況をシステムに反映させるためのインターフェースです。

## 2. パネル構成

### A. 送迎者登録パネル
未登録のドライバーがシステムに参加するためのパネルです。

- **ボタン**: `[ 📝 送迎者登録・更新 ]`
- **モーダル入力項目**:
  1. **活動区域（拠点）**: 主な活動エリアや待機する拠点。
  2. **ニックネーム**: 利用者に表示される名前。
  3. **車種情報**: 車の色・車種・ナンバーなど。
  4. **乗車定員**: 相乗り可能な最大人数（数値）。

### B. 送迎者操作パネル
登録済みドライバーが日常業務で使用するパネルです。

- **表示内容 (Embed)**:
  - 現在の状態（待機中 / 休憩中 / 業務外）
  - 現在の待機人数
- **ボタン構成**:
  1. `[ 🚦 出勤 ]`: 業務を開始し、**現在地**を入力します。
  2. `[ ☕ 休憩 ]`: 一時的にマッチング対象から外れます。
  3. `[ 🔄 再開 ]`: 休憩から復帰します。
  4. `[ 📍 現在地更新 ]`: 移動した際に、現在の場所を報告します。
  5. `[ 🏁 退勤 ]`: 業務を終了します。

---

## 3. 業務フローとデータ処理

### 3.1. 出勤・現在地更新
- 出勤時に「**現在地**」を入力することで、送迎一覧パネルに名前が表示され、配車依頼の割り当て対象となります。
- 待機場所を移動した際は、常に「現在地更新」を行うことで、最新の巡回ルートが利用者に共有されます。

### 3.2. ログ出力
登録や状態変更のたびに、運営者ログおよびグローバルログに詳細が記録されます。

**[送迎者登録ログ例]**
```text
🚗 送迎者登録
ユーザー：@driver_name
活動区域：○○方面
車種：プリウス (白)
乗車人数：4
```

---

## 4. 保存データ構造
`/drivers/userId.json` に以下の形式で保存されます。

```json
{
  "userId": "1234567890",
  "area": "○○方面",
  "nickname": "ニックネーム",
  "car": "車種情報",
  "capacity": 4,
  "registeredAt": "ISOタイムスタンプ"
}
```