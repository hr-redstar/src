# 命名・階層統一ルール & パネルUI設計

## 1. 命名規則
- ディレクトリ名は日本語を使用する。
- 処理ファイル名は日本語を使用する。
- `customId` などのプログラム内部識別子は英語（スネークケースまたはコロン区切り）を使用する。

## 2. 階層構造
- `src/bot/handler/` 配下に機能ごとのディレクトリを作成する。
- 例：`パネル設置`、`管理者パネル`、`送迎パネル`、`利用者パネル`、`登録処理`、`送迎処理`。

## 3. パネル形式 Embed メッセージの表示ルール

- パネル設置パネル・管理者パネル・送迎者パネル・利用者パネルなど、
  **「操作用パネル」として機能する Embed メッセージは、原則として
  Ephemeral（本人にのみ表示）では送信しない。**

- これらのパネルは **テキストチャンネルに通常メッセージとして送信**する。

- Ephemeral メッセージは以下の用途に限定する：
  - 設定完了通知
  - エラー表示
  - 一時的な選択 UI（RoleSelect / ChannelSelect など）
  - 個人専用の確認・入力フェーズ

- 複数人が操作・確認する前提の情報は、必ずチャンネル可視のメッセージとして扱う。

## 4. パネル更新ルール
- 同種のパネルは常に「最新1枚」を維持する。
- 保存された `messageId` がある場合は `edit` で更新し、存在しない場合のみ `send` で新規投稿する。

## 5. 実装指針（ハンドラ内）
- 「panel」という名前が付く Embed は ephemeral 禁止。
- `safeEphemeral()` は通知・警告・確認専用とする。
- パネル設置時は `interaction.channel.send` または共通の `sendOrUpdate` 処理を使用する。
